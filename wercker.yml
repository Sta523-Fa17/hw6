box: rocker/tidyverse
build:
  steps:
    - script:
      name: Setup / Update
      code: |
          Rscript -e "update.packages(ask = FALSE)"
    - script:
      name: Update scores
      code: |
          Rscript -e "
            file = base64enc::base64encode('precincts.geojson')
            body = list(
              team='$team', 
              key='$key',
              file=file
            )
            httr::POST('http://saxon.stat.duke.edu:7887/prediction', body=body, encode = 'json') 
          "
    - script:
      name: Show leaderboard
      code: |
          echo "Not yet"
    - script:
        name: Check for allowed files
        code: |
          Rscript -e "source('https://raw.githubusercontent.com/Sta523-Fa17/hw6/master/hw6_whitelist.R')"
